# Interactive component

Package 'plotly' and 'quantmod' are necessary for interactive Candlestick visualization. 

```{r, include=FALSE}
library(plotly)
library(quantmod)
library(ggplot2)
library(dplyr)
```

Interactive:

```{r, include=FALSE}

AAPL <- read.csv(file = 'final_data/AAPL.csv')

fig_aapl <- AAPL %>% plot_ly(x = AAPL$Date, type="candlestick",
          open = AAPL$Open, close = AAPL$Close,
          high = AAPL$High, low = AAPL$Low, showlegend = FALSE)

fig_aapl <- fig_aapl %>% layout(title = "AAPL Candlestick Chart",
         xaxis = list(rangeslider = list(visible = F)),  yaxis = list(title = 'Price ($)'))


fig_aapl <- fig_aapl %>% add_lines(x = ~Date, y = ~Open_10 , name = "10 MA",
            line = list(color = 'blue', width = 1.5),
            legendgroup = "10 MA",
            hoverinfo = "none", inherit = F) 


fig_aapl <- fig_aapl %>% add_lines(x = ~Date, y = ~Open_20, name = "20 MA",
            line = list(color =  'purple', width = 1.5),
            legendgroup = "20 MA", inherit = F, hoverinfo = "none") 


```

```{r}
fig_aapl
```

The plot above is an interactive candlestick plot demonstrating the price movement of Apple. The plot includes price data from 2019-01-30 to 2021-10-21. Aside from the candle sticks, the 10-day moving average and the 20-day moving average are also displayed. These two moving average lines form vital indicators for the Golden Cross Investing method.

```{r, include=FALSE}

COST <- read.csv(file = 'final_data/COST.csv')

fig_cost <- COST %>% plot_ly(x = AAPL$Date, type="candlestick",
          open = COST$Open, close = COST$Close,
          high = COST$High, low = COST$Low, showlegend = FALSE)

fig_cost <- fig_cost %>% layout(title = "COST Candlestick Chart",
         xaxis = list(rangeslider = list(visible = F)),  yaxis = list(title = 'Price ($)'))


fig_cost <- fig_cost %>% add_lines(x = ~Date, y = ~Open_10 , name = "10 MA",
            line = list(color = 'blue', width = 1.5),
            legendgroup = "10 MA",
            hoverinfo = "none", inherit = F) 


fig_cost <- fig_cost %>% add_lines(x = ~Date, y = ~Open_20, name = "20 MA",
            line = list(color =  'purple', width = 1.5),
            legendgroup = "20 MA", inherit = F, hoverinfo = "none") 



```

```{r}
fig_cost
```

The plot above is an interactive candlestick plot demonstrating the price movement of Costco. The plot includes price data from 2019-01-30 to 2021-10-21. Aside from the candle sticks, the 10-day moving average and the 20-day moving average are also displayed. These two moving average lines form vital indicators for the Golden Cross Investing method.


```{r, include=FALSE}
MSFT <- read.csv(file = 'final_data/MSFT.csv')

fig_msft <- MSFT %>% plot_ly(x = MSFT$Date, type="candlestick",
          open = MSFT$Open, close = MSFT$Close,
          high = MSFT$High, low = MSFT$Low, showlegend = FALSE)

fig_msft <- fig_msft %>% layout(title = "MSFT Candlestick Chart",
         xaxis = list(rangeslider = list(visible = F)),  yaxis = list(title = 'Price ($)'))


fig_msft <- fig_msft %>% add_lines(x = ~Date, y = ~Open_10 , name = "10 MA",
            line = list(color = 'blue', width = 1.5),
            legendgroup = "10 MA",
            hoverinfo = "none", inherit = F) 


fig_msft <- fig_msft%>% add_lines(x = ~Date, y = ~Open_20, name = "20 MA",
            line = list(color =  'purple', width = 1.5),
            legendgroup = "20 MA", inherit = F, hoverinfo = "none") 



```

```{r}
fig_msft
```

The plot above is an interactive candlestick plot demonstrating the price movement of Microsoft. The plot includes price data from 2019-01-30 to 2021-10-21. Aside from the candle sticks, the 10-day moving average and the 20-day moving average are also displayed. These two moving average lines form vital indicators for the Golden Cross Investing method.

```{r, include=FALSE}
GM <- read.csv(file = 'final_data/GM.csv')

fig_gm <- GM %>% plot_ly(x = GM$Date, type="candlestick",
          open = GM$Open, close = GM$Close,
          high = GM$High, low = GM$Low, showlegend = FALSE)

fig_gm <- fig_gm %>% layout(title = "GM Candlestick Chart",
         xaxis = list(rangeslider = list(visible = F)),  yaxis = list(title = 'Price ($)'))


fig_gm <- fig_gm %>% add_lines(x = ~Date, y = ~Open_10 , name = "10 MA",
            line = list(color = 'blue', width = 1.5),
            legendgroup = "10 MA",
            hoverinfo = "none", inherit = F) 


fig_gm <- fig_gm %>% add_lines(x = ~Date, y = ~Open_20, name = "20 MA",
            line = list(color =  'purple', width = 1.5),
            legendgroup = "20 MA", inherit = F, hoverinfo = "none") 



```

```{r}
fig_gm
```

The plot above is an interactive candlestick plot demonstrating the price movement of General Motor. The plot includes price data from 2019-01-30 to 2021-10-21. Aside from the candle sticks, the 10-day moving average and the 20-day moving average are also displayed. These two moving average lines form vital indicators for the Golden Cross Investing method. Notice that during the pandamic lockdown, the price of GM decreased significantly. This drasitic decrease could be related to the shutdown of global production lines and travel restrictions.

```{r, include=FALSE}
NVDA <- read.csv(file = 'final_data/NVDA.csv')

fig_nvda <- NVDA %>% plot_ly(x = NVDA$Date, type="candlestick",
          open = NVDA$Open, close = NVDA$Close,
          high = NVDA$High, low = NVDA$Low, showlegend = FALSE)

fig_nvda <- fig_nvda %>% layout(title = "NVDA Candlestick Chart",
         xaxis = list(rangeslider = list(visible = F)),  yaxis = list(title = 'Price ($)'))


fig_nvda <- fig_nvda %>% add_lines(x = ~Date, y = ~Open_10 , name = "10 MA",
            line = list(color = 'blue', width = 1.5),
            legendgroup = "10 MA",
            hoverinfo = "none", inherit = F) 


fig_nvda <- fig_nvda %>% add_lines(x = ~Date, y = ~Open_20, name = "20 MA",
            line = list(color =  'purple', width = 1.5),
            legendgroup = "20 MA", inherit = F, hoverinfo = "none") 



```

```{r}
fig_nvda
```

The plot above is an interactive candlestick plot demonstrating the price movement of Nvida. The plot includes price data from 2019-01-30 to 2021-10-21. Aside from the candle sticks, the 10-day moving average and the 20-day moving average are also displayed. These two moving average lines form vital indicators for the Golden Cross Investing method.

```{r, include=FALSE}
TSLA <- read.csv(file = 'final_data/TSLA.csv')

fig_tsla <- TSLA %>% plot_ly(x = TSLA$Date, type="candlestick",
          open = TSLA$Open, close = TSLA$Close,
          high = TSLA$High, low = TSLA$Low, showlegend = FALSE)

fig_tsla <- fig_tsla%>% layout(title = "TSLA Candlestick Chart",
         xaxis = list(rangeslider = list(visible = F)),  yaxis = list(title = 'Price ($)'))


fig_tsla <- fig_tsla %>% add_lines(x = ~Date, y = ~Open_10 , name = "10 MA",
            line = list(color = 'blue', width = 1.5),
            legendgroup = "10 MA",
            hoverinfo = "none", inherit = F) 


fig_tsla <- fig_tsla %>% add_lines(x = ~Date, y = ~Open_20, name = "20 MA",
            line = list(color =  'purple', width = 1.5),
            legendgroup = "20 MA", inherit = F, hoverinfo = "none") 


```

```{r}
fig_tsla
```

The plot above is an interactive candlestick plot demonstrating the price movement of Tesla. The plot includes price data from 2019-01-30 to 2021-10-21. Aside from the candle sticks, the 10-day moving average and the 20-day moving average are also displayed. These two moving average lines form vital indicators for the Golden Cross Investing method.


```{r, include=FALSE}
library(grid)
library(gridExtra)
```

```{r}
fig <- subplot(fig_aapl, fig_cost, fig_msft, fig_tsla, fig_nvda, fig_gm,  nrows=2)  %>%
  layout(title = list(text = "Stock Price with Moving Average"),
         plot_bgcolor='#e5ecf6', 
         xaxis = list( 
           zerolinecolor = '#ffff', 
           zerolinewidth = 2, 
           gridcolor = 'ffff'), 
         yaxis = list( 
           zerolinecolor = '#ffff', 
           zerolinewidth = 2, 
           gridcolor = 'ffff'))
fig
```

The plot above is a combination of all the interactive candlestick plots for six different major stocks traded in the U.S. stock exchange.The plot includes price data from 2019-01-30 to 2021-10-21. 10-day moving average line and 20-day moving average line are plotted on top of each candlestick plot.
